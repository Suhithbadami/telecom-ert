<!DOCTYPE html>

<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        
        /* Center-align the table */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
              background-color: #4B0082 !important; 
            color: white;
        }




        body {
            height: 400px;
            background: linear-gradient(135deg, #5B247A, #1BCEDF) ;
            color: black;
            min-height: 70vh; 
            padding-top: 1px;
        }




        th, td {
            text-align: center;
            padding: 8px;
        }




        th {
            background-color:  white;
            color: black;
        }




        tr:nth-child(even) {
            background-color: #4B0082;
        }




        tr:nth-child(odd) {
            background-color: #4B0082;
        }




        /* Style the buttons */
        .button-container {
            text-align: left;
            margin-top: 10px; /* Reduce top margin */
        }




        .button {
            background-color: #5cb85c;
            color: black;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            margin: 5px;
        }




        .navbar {
            background-color: white !important;
            padding: 4px 0;
            margin-bottom: 20px; /* Reduce bottom margin */
        }




        /* Style for the "View More" button */
        #view-more-button {
            background-color: #5cb85c;
            color: black;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            margin: 5px;
        }




        /* Hide all rows initially */
        tr[data-plan-type] {
            display: none;
        }




        /* Style the active button */
        .button.active {
            background-color:white;
        }
    </style>

</head>

<body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <h1 class="navbar-brand" style="color: black; font-size: 32px; background-color: white; line-height:0.5;">History</h1>
            </div>
        </div>
    </nav>
    <div class="button-container">
        <!-- Use data-attribute to specify the call type for each button -->
        <button class="button" data-call-type="all">All</button>
        <button class="button" data-call-type="incoming">Incoming</button>
        <button class="button" data-call-type="outgoing">Outgoing</button>
    </div>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Mobile No</th>
                <th>Starting Time</th>
                <th>Ending Time</th>
                <th>Duration</th>
                <th>Call Type</th>
            </tr>
        </thead>
      
             <tbody>
            <tr th:each="entry : ${callHistory}">
                <td th:text="${entry.date}"></td>
                <td th:text="${entry.mobileNo}"></td>
                <td th:text="${entry.startingTime}"></td>
                <td th:text="${entry.endingTime}"></td>
                <td th:text="${entry.duration}"></td>
                <td th:text="${entry.callType}"></td>
            </tr>
        </tbody>
    </table>




    <div class="button-container">
        <button id="view-more-button">View More</button>
    </div>




    <script>
        // Get all buttons with the "button" class
        const buttons = document.querySelectorAll('.button');




        // Get all rows with data-call-type attribute
        const rows = document.querySelectorAll('tr[data-call-type]');
        const viewMoreButton = document.getElementById('view-more-button');
        let displayCount = 5;




        // Initially, hide rows beyond the first 3
        rows.forEach((row, index) => {
            if (index >= displayCount) {
                row.style.display = 'none';
            }
        });
      // Function to change button color on click
  function changeButtonColor(clickedButton) {
      buttons.forEach(button => {
          button.classList.remove('active');
      });
      clickedButton.classList.add('active');
  }
        // Add click event listeners to the buttons
        buttons.forEach(button => {
            button.addEventListener('click', () => {
                const callType = button.getAttribute('data-call-type');

changeButtonColor(button);
                // Toggle visibility of rows based on the call type
                rows.forEach(row => {
                    const rowCallType = row.getAttribute('data-call-type');
                    if (callType === 'all' || callType === rowCallType) {
                        row.style.display = 'table-row';
                    } else {
                        row.style.display = 'none';
                    }
                });
            });
        });




        // Add click event listener to the "View More" button
        viewMoreButton.addEventListener('click', () => {
            displayCount += 5; // Increase the number of rows to display
            // Show additional rows up to displayCount
            rows.forEach((row, index) => {
                if (index < displayCount) {
                    row.style.display = 'table-row';
                }
            });
            // Hide the "View More" button if all rows are displayed
            if (displayCount >= rows.length) {
                viewMoreButton.style.display = 'none';
            }
        });




    </script>

</body>

</html>